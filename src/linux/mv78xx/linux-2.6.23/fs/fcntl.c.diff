diff -urN linux-2.6.22.18.orig/fs/fcntl.c linux-2.6.22.18/fs/fcntl.c
--- linux-2.6.22.18.orig/fs/fcntl.c	2008-02-11 08:31:19.000000000 +0100
+++ linux-2.6.22.18/fs/fcntl.c	2008-01-29 18:26:00.000000000 +0100
@@ -198,6 +198,7 @@
 		ret = dupfd(file, 0);
 	return ret;
 }
+EXPORT_SYMBOL(sys_dup);
 
 #define SETFL_MASK (O_APPEND | O_NONBLOCK | O_NDELAY | FASYNC | O_DIRECT | O_NOATIME)
 
